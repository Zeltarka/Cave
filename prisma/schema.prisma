// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL_NON_POOLING")
}


// Modèle Admin
model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  nom       String
  actif     Boolean  @default(true)
  
  @@map("admins")
}

// Modèle Commande
model Commande {
  id            String          @id @default(cuid())
  numero        String          @unique
  
  // Client
  clientNom     String
  clientPrenom  String
  clientEmail   String
  clientAdresse String
  clientVille   String
  clientCP      String
  
  // Commande
  panier        String // JSON stringifié
  total         Float
  statut        StatutCommande @default(EN_ATTENTE)
  
  // Dates
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  payeeAt       DateTime?
  livreeAt      DateTime?
  
  // Notes admin
  noteAdmin     String?
  
  @@index([statut])
  @@index([createdAt])
  @@map("commandes")
}

enum StatutCommande {
  EN_ATTENTE
  PAYEE
  PREPAREE
  PRETE
  LIVREE
  ANNULEE
}

// Modèle Contenu
model Contenu {
  id        String   @id @default(cuid())
  page      String   @unique
  contenu   String   // JSON stringifié
  updatedAt DateTime @updatedAt
  updatedBy String
  
  @@map("contenus")
}
